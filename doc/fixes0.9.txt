Changelist for slashem9 v0.9:
- Internals: obviate the following compile-time configurable options: SINKS, BLACKMARKET, D_SABER, LIGHTSABERS, P_SPOON, WALLET_O_P, EATEN_MEMORY, WALLIFIED_MAZE, AUTOPICKUP_EXCEPTIONS, YOEMAN, SEDUCE, KOPS, TOURIST, FIREARMS, EXP_ON_BOTL, SCORE_ON_BOTL, DWARF, ELBERETH, TEXTCOLOR, STATUS_COLORS, MENU_COLOR, SHOW_WEIGHT, SHOW_DMG, WIZARD, UNPOLYPILE, INVISIBLE_OBJECTS, OTHER_SERVICES, REDO, XLOGFILE, STEED, FREE_ALL_MEMORY, DISPLAY_LAYERS, REALTIME_ON_BOTL, CLIPPING, DUNGEON_GROWTH.  Where applicable, these can still be toggled at run time.
- Internals: miscellaneous code cleanup and simplification.
- Internals: change K&R-style function definitions to ANSI.  Require c99.  Use bool over boolean.
- Internals: remove support for many obsolete platforms and build configurations.  Basic requirements: ANSI c99 + win32|posix-ish.
- Internals: remove the internal malloc implementation and heap monitor in favour of valgrind.
- Interface: remove all windowports except for tty.
- Development: allow slashem.sh to automatically launch debugging tools (gdb, lldb, valgrind), if the environment variable NH_USE_(GDB|LLDB|VALGRIND) is set.  It will also pass $NH_(GDB|LLDB|VALGRIND)_FLAGS to the corresponding debugging tool.
- Interface: add Unicode graphics support with UTF-8 output.  Original code by Patric Mueller; heavy modifications have been made.  This includes support for Unicode glyphs on topl, botl, and inventory display (with menu_glyphs), as well as Unicode support in curses.
- Interface: remove DEC and IBM graphics; the only graphics sets available are ascii, utf8, and utf8compat (using only characters that are part of wgl4), and these are now under a compound 'graphics' option.
- Interface: recommend saving and reloading, rather than quitting, in impossible().
- Gameplay: re-enable the rogue level.
- Development: replace build system.  Currently requires GNU make.
- Internals: remove support for save compression, both internal routines and shelling out to an external compressor.
- System: remove FILE_AREAS.
- Internals: store gold on object chains.
- Bugfix: YAFM was supposed to show, but didn't, when player rubs gold on a stone.
- Gameplay: make searching deterministic; you only have to search once to find what you're looking for.
- Internals: completely remove makedefs.  The tasks it performed have been accomplished with macro magic, shifted to runtime, or, in some cases, removed entirely.
- Gameplay: lower duration of hallucination from potions to only 50-55, 50-105, or 50-155 turns (depending on BUC).
- Interface: use symbols from EPYX rogue on rogue level.
- System: allow DLB to optionally use a library stored inside the slashem binary, removing the need for external data files.
- Internals: add a custom dynamic string library with associated colour information.  Use it to implement statuscolors/botl.
- Bugfix: with USE_FCNTL enabled, the lock file descriptor was leaked (also present in NetHack and reported to the devteam).
- Bugfix: memory leak in curses.
- Bugfix: under curses with perm_invent enabled, if an inventory item was longer than the width of the inventory window, it could continue onto the next line rather than being cut off.
- Interface: remove autoquiver.
- Gameplay: move gnomish mines to dlvl 3-4, from 2-4.
- Interface: a common technique for identification of wands is to engrave with them on top of an existing engraving; the message produced will either uniquely identify the wand of confine it to one of a small number.  When doing so would uniquely identify the wand, formally identify it as well.
- Internals: remove reliance on the system for a regex engine, and instead vendor one ourselves (libtre).
- Gameplay: gypsies can no longer be farmed for wishes.  Gypsies generated via reverse genocide are 'tainted' and will not grant wishes.
- Bugfix: artifact naming.  The rules here are a bit different from in other games in the family: a name is only prohibited to be attached to an object when either there exists an artifact whose name is that name and whose base object is that object, or where adherence to the previous rule would leak information.
- Bugfix: when the player's hand slipped while naming an object with the name of an artifact, the name was changed to the proper name of the artifact plus a typo, rather than the actual player-inputted name plus a typo.
- Bugfix: player was able to eat food from the floor of a pit while teetering at its edge.
- Interface: get a nice death message when you die by jumping into a pit you made.
- Bugfix: wording: when a ridden steed is led onto a polymorph trap and polymorphs into another rideable form, you have to adjust yourself in the saddle on on 'the' (monster-type), not 'a'.
- Bugfix: passwall player couldn't pick up objects from pit (fixed by making them always fall in, but suffer no ill effects).
- Gameplay: an alchemical smock will protect you from alchemical blasts.
- Bugfix: segfault could occur when explosion was thrown near the edge of the map screen.
- Gameplay: when monks get the message 'Your armor is rather cumbersome...', their attack power is reduced rather than boosted.
- Interface: monks only get the 'Your armor is rather cumbersome...' message when that encumberance actually causes them to miss.
- Interface: remove support for WIN32CON.
- Grammar: better enlightenment messages when intrinsically warned of certain species.
- Interface: use regex rather than pattern matching in autopickup exceptions.
- Internals: use regex rather than pattern matching for database entries.
- Bugfix: encyclopedia entry for Ruggo the Gnome King.
- Bugfix: potion of sickness made you lose HP even if you were poison resistant.
- Gameplay: #monster while vampshifted will always restore you to your vampiric form.
- Bugfix: inventory display when inventory is empty and perm_invent is on says 'not carrying anything' rather than just '(end)'.
- Bugfix: plastic objects will be destroyed by lava.
- Gameplay: metallic objects have a 10% chance to be destroyed by lava.
- Bugfix: removing a ring of protection would make a ring of protection from shape changers stop working.
- Interface: bump chance of getting the message 'yo' mama -- core dumped' from 1% to 2%.
- Bugfix: monster attacking another monster with a draining attack could blind it, too.
- Interface: nicer messages when attaching candles to the candelabrum of invocation.
- Interface: no more VIDEOSHADES.
- Gameplay: pits cannot be poisoned until dlvl 8-10 (randomly decided for each game).  Player gets a notification when they enter the first level with poisoned pits.
- Bugfix: various memory safety fixes.
- Gameplay: some smart monsters have more advanced AI.
- Gameplay: weaken pudding farming by keeping cloned monsters from generating corpses or death drops.
- Bugfix: paralyzed unicorns would catch thrown gems.
- Grammar: use 'thine' rather than 'thy' where appropriate.
- Interface: add more thorough prompting for potentially disastrous commands.

Imports from NetHack version 3.6:
- Bugfix: acid dropping bug.
- Bugfix: deallocated wielded objects.
- Bugfix: water punishment crash (NetHack/Slash'EM Extended).
- Internals: change dumplog implementation to be much cleaner.
- Bugfix: engravings made on drawbridge would appear on floor beneath.  Fixed by removing all engravings on drawbridge tile whenever it is opened, closed, or wrecked.
- Bugfix: 'You hear The <x> tumbles downwards' when dropping an item into a pit while blind and standing on the edge.
- Bugfix: wielded silver arrows didn't always deal silver damage.
- Bugfix: playercould sit down on items contained in a pit while teetering at its edge.
- Bugfix: message when you pushed a boulder into a pool of water while riding said that you filled it, rather than your steed.
- Gameplay: can use '>' to jump into a pit while teetering at its edge.
- Bugfix: when you lead a named steed into a trap while hallucinating, since the name is elided, elide also the article 'the'.
- Interface: when prompted for a direction, '?' shows help and prompts again.
- Gameplay: instead of printing 'It turns into it', smell what kind of 'it' it was, assuming you can.
- Gameplay: don't allow using non-magical whistles underwater.
- Gameplay: don't allow using whistles and musical instruments when in a form that blow.
- Gameplay: monster lifesaving messages.  Don't print a message about the monster reviving if the monster is invisible.  Don't mention the amulet if it's invisible.  (You do see a visible amulet on an invisible monster because it glows.)
- Interface: use proper article in message when eating artifact.
- Bugfix: potions of acid dipped into fountains were not always used up.  Toilets were not affected.
- Interface: if your blindfold/towel glows while you're wearing it and it's the only thing keeping you from seeing, you see that glow.
- Bugfix: tripping over a cockatrice corpse while not wearing boots did not petrify the player.
- Bugfix: proper death messages when multiple delayed deaths are in play at once.
- Bugfix: when wearing the eyes of the overworld while trapped in a dust vortex, player got a message every turn about being blinded and then their vision clearing.
- Gameplay: lighting shops now stock oil.
- Interface: right-clicking on a tile will show what that tile is.
- Gameplay: add the #tip command.
- Gameplay: you can quiver gold.
- Internals: move various global flags and state into a context struct.
- Gameplay: hearing is now a full-fledged attribute, like sight.
- Gameplay: artificial ice will eventually melt away.  Warning will notify you if the ice is about to melt.
- Interface: replace the 'stop eating' prompts with 'continue eating', default no.
- Bugfix: make half physical damage work in many places it didn't.
- Bugfix: allow player to throw a spell (e.g. cone of cold, fireball) at a monster seen only with infravision/telepathy.
- Bugfix: don't say 'it moves only reluctantly' (referring to pet).
- Bugfix: bad capitalization of message when charged by shk for something that catches fire.
- Bugfix: when fruitname=lotus, don't say fruit juice tastes like lotu juice.
- Bugfix: non-humanoid angelic minions got swords and armour.
- Gameplay: paper, straw, wood, plastic, and gold golems resist cold.
- Gameplay: player can use a touchstone on gold.
- Gameplay: if engulfed in vortex and blind only because of a blindfold, taking off the blindfold should cause blindness to take effect immediately.
- Gameplay: unihorn|prayer won't cure blindness if engulfed in a vortex, because it'll just return immediately.
- Gameplay: confused reading of cursed charging scroll drains energy.
- Interface: new rumors, oracles, encyclopedia entries, and other random messages.
- Gameplay: healers [and undead slayers] will notice when a wand of undead turning revives a monster.
- Gameplay: you can wish for tins of specific types (e.g. tin of deep fried orc).
- Bugfix: display was not correctly updated if you received a spellbook from your god while unable to see your invisible self.
- Interface: can generate random monster in debug mode with '*'.
- Interface: acknowledge Schroedinger's cat at the end of the game, if you have a box containing it.
- Gameplay: pets will mimic if they eat a mimic corpse.
- Gameplay: add a health food store, which contains exclusively vegetables.  It replaces the food store in minetown for monks.
- Gameplay: certain monsters (currently only the three horseman) can move other monsters out of their way.
- Grammar: miscellaneous fixes.
- Bugfix: trappers hid on the ceiling.
- Bugfix: player hiding on ceiling did not drop to the floor when #sitting.
- Bugfix: if a monster carrying a boulder was inside of a pit or a hole when killed, the boulder would fill the pit/hole but the monster's corpse would not be buried.
- Gamplay: player in certain polyforms will be intrinsically warned of some monsters.
- Bugfix: swamps on Juiblex's level were called 'moat' when frozen.
- Bugfix: greased would slide, if kicked while on the planes of air or water.
- Bugfix: when a cursed scroll of destroy armor lowered the enchantment of e.g. gauntlets of dexterity or helm of brilliance, the associated attribute didn't also decrease.
- Bugfix: if hitting a cockatrice with a mirror or expensive camera resulted in the object shattering, the player would be stoned.
- Bugfix: if a blind levitating player attempted to go downstairs, they would be told they were floating above the stairs, even if they had never seen the stairs.
- Bugfix: if a slow-moving monster was hiding under a corpse when it rotted, the monster was not displayed immediately.
- Bugfix: mimic on the rogue level in a doorway would imitate a closed door, even though rogue has no closed doors.
- Bugfix: sometimes, shapeshifted or polymorphed monsters would get the wrong number of hit points.
- Bugfix: monsters weren't using some teleport traps they should have.
- Bugfix: cleric casting lighting at player didn't blind player.
- Interface: when a monster is wielding multiple daggers, say they thrust 'one of' them, not all of them.
- Interface: if you didn't see a rolling boulder fall into a pit, you would only hear about it if you were blind.
- Gameplay: rocks can skip over water.
- Gameplay: pits created by wands of digging and drums of earthquake will get filled in by water or lava from the surrounding area, just like player-created pits.
- Gameplay: breakable objects that fall through trapdoors/holes have a chance to break upon landing on the lower level.
- Gameplay: player in vampiric form can use #monster to transform into a fog cloud, wolf, or vampire bat.
- Interface: only say '(the djinni) vanishes' if player can see the djinni.
- Gameplay: ensure a djinni released with the message 'you disturbed me, fool' is always hostile.
- Interface: fix messages produced when shopkeepers repair their shops.
- Interface: fix bad message when unique monster's corpse is dropped down stairs.
- Gameplay: fix inconsistent attributes of rocks made from fractured boulders or statues.
- Bugfix: C340-18: setting off an unknown rolling boulder trap that kills a monster counts against pacifism.  Really fixed this time.
- Gameplay: monster throwing a greased object has a chance to slip/misfire, like player.
- Bugfix: Killing a pet by displacing it onto water/lava or a trap yields experience.
- Bugfix: rolling boulder does not show up in bones files.
- Bugfix: sleeping ridden steed would respond to #chat.
- Gameplay: eliminate minor anomalies in the generation of luck-adjusted random numbers.
- Bugfix: 'matza' was not pluralised properly.
- Bugfix: if a worn item was destroyed by dipping into hot oil, its presence would continue to manifest itself problematically.
- Interface: fix capitalization in 'Ulch - That <object> was rustproofed'.
- Bugfix: incorrect screen display following engulfer petrified by player monster.
- Bugfix: panic if hero petrified engulfer while punished.
- Interface: more specific messages when you drop your weapons due to glibness.
- Interface: when considering which inventory stack to add a newly picked up item to, try to add it to the quiver first.
- Interface: #adjust can be used to split stacks.
- Interface: 'helm' and 'hat' differentiated.
- Gameplay: helmets don't protect against falling cockatrice eggs because they 'splatter all over your face'.
- Bugfix: shopkeepers would not always charge you for destroying their objects.
- Bugfix: shopkeeper would sometimes charge you for only one broken object, even if you broke multiple.
- Bugfix: crash when wizkit wishing for quest artifact.
- Bugfix: prevent 'your steed is still eating' message when going through a magic portal.
- Bugfix: player would see hallucinated form of blacklight when it exploded.
- Interface: give feedback when blinded by stinking cloud.
- Interface: fix capitalization when monster's armour reflects floating eye gaze.
- Interface: looking at container shows its locked/unlocked status and contents count, if known.
- Bugfix: if a monster 'shrieks in pain' (from a potion of (un)holy water|acid), it didn't wake anything up.
- Bugfix: master of thieves could meditate even when he shouldn't.
- Bugfix: unicorn from bones files could be peaceful/hostile even if alignment matched/didn't match.
- Bugfix: triggering statue trip while blind should have spawned an I marker.
- Bugfix: fix message when multiple nasties were summoned.
- Internals: store region player_flags as a uint instead of a boolean.
- Gameplay: can re-dig castle holes if they were filled in.
- Bugfix: fix experience for monsters with passive attacks.
- Bugfix: message order when displacing pet.
- Interface: swap places with pet, rather than displacing it.
- Bugfix: hallucinating character wouldn't fall out of their steed's saddle when falling into sokoban hole/pit.
- Bugfix: fixup levitation/steed messages.
- Bugfix: if a monster that could teleport evaded your kick on a no-teleport level, a message would be printed saying it teleported.
- Gameplay: intelligent pets will refuse to eat corpses of their own kind.
- Interface: stoning/sliming/vomiting messages interrupt multi-turn actions (except eating food that might cure the ailment).
- Interface: '<foo> armor' is an acceptable substitute for '<foo> mail' when wishing.
- Bugfix: eating medusa's spoiled corpse would cause food poisoning rather than petrification.
- Bugfix: blessed food detection doesn't warn you before eating medusa's corpse.
- Gameplay: it is no longer possible to bypass (most of) the sanctum by repeatedly levporting in and out of it until you land in the temple.
- Interface: horses have hooves, not claws.
- Gameplay: digging down on the site of an existing hole will finish immediately.
- Bugfix: only prefix shopkeeper names with Mr./Ms. when referred to by last name.
- Bugfix: properly account for multiple attacks when determining maximum passive damage that can be dealt.
- Bugfix: ghosts and other noncorporeals could be slimed.
- Gameplay: an exploding landmine will destroy a drawbridge.
- Bugfix: don't tell player about an object broken but not seen.
- Gameplay: dipping an object into a potion of acid will erode it.
- Bugfix: don't get a message like 'the bolt of lightning whizzes by you' when blind.
- Gameplay: casters won't cast aggravate monster when all the monsters on the level are awake.
- Gameplay: casters' aggravate monster spell will wake up meditating monsters.
- Bugfix: busy pets won't be prevented from accompanying ascending player.
- Bugfix: hero could appear to be inside of all after destroying drawbridge.
- Bugfix: if an object was polymorphed into a boulder, vision was not obscured properly.
- Gameplay: armour should autocurse when monster wears it, not just player.
- Gameplay: limit potential gains from eating rings.
- Bugfix: prevent possible segfault about swallowed hero and magic trap.
- Internals: rennovate mextra to be a proper structure, which also stores mname.
- Interface: fix incorrect alignment display of angels in some cases.
- Interface: Iu doesn't show price twice when player is only carrying one unpaid object.
- Bugfix: player would feel, but not remember, certain traps.
- Gameplay: when confused remove curse scroll scrambles an object's beatitude, player loses knowledge of said beatitude.
- Bugfix: ';' would sometimes display both 'normal vision' and 'astral vision'.
- Gameplay: fire/frost brand have a chance to boil or freeze water they come into contact with, avoiding erosion.
- Interface: <esc> at direction prompt clears message window.
- Interface: break polyselfless conduct when eating a mimc corpse and changing form, or when dying by sliming.
- Gameplay: low-level characters are likelier to have their health restored as a result of prayer; high-level characters are less likely to.
- Bugfix: invulnerability would not protect from mind flayer's psychic blast.
- Bugfix: player who bypassed the valley of the dead to get to gehenna and then returned to the valley and tried to enter gehenna thence would get a prompt, as if it were their first time entering gehenna.
- Gameplay: don't get castle drawbridge code as a prayer reward if you've already entered gehenna.
- Bugfix: Sunsword would continue to emit light after monster wielding it was killed.
- Bugfix: game could crash if luck dropped below -1 during prayer.
- Bugfix: lycanthropic player in human form would not resist drain life, unlike lycanthropic monster.
- Bugfix: if a multiple boulders were at a location and one were removed, player would be able to see items that were previously blocked by the boulder.
- Bugfix: incubi react to mirrors.
- Bugfix: behaviour of brain-eating attack was incorrect in certain cases.
- Bugfix: pets could dig on the rogue level.
- Gameplay: allow pets to unlock and open doors with keys.
- Bugfix: don't show message 'the corridor disappears' when player doesn't actually see it disappear.
- Bugfix: don't print 'your vision blurs' for a hallucination-resistant player caught by a chest trap.
- Bugfix: if a guard encounters gold on the ground while leading player away from a vault, don't think it was dropped by the player (unless it was).
- Bugfix: shopkeeper would not charge for corpse revived by player.
- Bugfix: non-wizard player could wish for a trapped chest or tin be specifying it as 'poisoned'.
- Gampeplay: if unable to move, player is woken up by vault guard or demon demanding money.
- Bugfix: if demon is refused money, becomes hostile, and is subsequently killed, player lost alignment.
- Bugfix: flaming and shocking spheres could pick up items.
- Interface: opening or closing a drawbridge while blind (but not deaf) will give a message.
- Gameplay: a destroyed drawbridge will scatter debris.
- Bugfix: if a pet went to sleep, they could continue eating food.
- Bugfix: if you lose levels while polymorphed, your polyform (not just your true form) loses maxhp.
- Gameplay: use a more specialized algorithm to calculate maxhp gain/loss for monsters on level change.
- Bugfix: trap detection routines did not detect traps in carried or buried chests.
- Bugfix: swallowing medusa (e.g. as a purple worm) should be fatal.
- Bugfix: swallowing a petrifying monster should violate foodless conduct before killing you.
- Bugfix: crash when lifesaved after walking over lava with unfixed water walking boots.
- Interface: when levitation ends, multi-turn actions (running, waiting, etc.) are interrupted.
- Grammar: message when a leprechaun steals gold from under your steed's feet referenced your feet.
- Bugfix: #call could be used to distinguish high priests on astral plain.

Imports from other locations:
- Bugfix: hallucination segfault (Slash'EM Extended).
- Interface: add curses windowport (Karl Garrison).  Many additional improvements from various sources.
- System: add extended logfile (xlogfile) with more information than standard log file (Aardvark Joe).  Remove logfile.
- Interface: show object glyphs in inventory display (Patric Mueller).
- Interface: highlight object piles and stairs covered by objects (Pasi Kallinen).
- Interface: add MSGTYPES, which allow for user-configurable filtering, emphasis, or norep of messages (Pasi Kallinen).  Use regex instead of globs for matching.
- Interface: allow users to specify colours for dungeon features (Patric Mueller).
- Bugfix: '???' could show up in regular gameplay (Fredrik Ljungdahl).
- Interface: show dark--but visited/known--room tiles on the screen (Clive Crous).
- Interface: allow key rebinding (Jason Dorje Short).
- Interface: add statuscolors (Shachaf and Oren Ben-Kiki), heavily modified; and hitpointbar (Patric Mueller).
- Development: add a fuzzer (Pasi Kallinen).
- Bugfix: calm steed technique (Slash'EM Extended).
- Bugfix: crash bug in tty when an item's description was just less than the window width, but description + accelerator + glyph + padding was just more than said width (Tangles).
- Bugfix: torch panic (Slash'EM Extended).
- Bugfix: lightning-resistant monsters could be affected by lightning (Slash'EM Extended).
- Interface: show spell memory in cast menu (inspired by Slash'EM Extended).
- Internals: use a high-quality cryptographic random number generator (Mikko Juola and libtomcrypt).  This is intended to thwart stunts like SWAGINZZZ (see https://pellsson.github.io/).
- Bugfix: when items disappear from a cursed bag of holding, it may not take up a turn; and, if it causes the player to become unencumbered, they may not get a message or statusbar change until the following turn (Michael Lehotay).
- Gameplay: to prevent abuse, bones are not saved on levels which were hung up on (Dr. Alex Smith).
- Bugfix: when dying to an undead, it was disclosed whether bones were created (Dr. Alex Smith).
- Bugfix: C343-162: magicbane hit messages could use the wrong pronouns (Ray Chason).
- Bugfix: C343-324: long worm crash fix (Patric Mueller).
- Interface: incorporate quiver_fired (Jukka Lahtinen).
- Interface: at the end of the game, show counts of extinct monsters next to genocided; birth counts next to kill counts (Jukka Lahtinen).
- Interface: add wall colouration for different dungeon branches and special rooms (L).
- Interface: add the overview patch, which adds two new extended commands: #overview, which shows an overview of the layout of the dungeon levels the player has explored, and #annotate, which allows the player to make a mental note which is associated with the current level (Hojita Discordia).
- Interface: weapon shop owners are named after GTA characters (SlashTHEM).
- Gameplay: the Staff of Aesculapius protects against drain life again (SlashTHEM).
- Gameplay: amnesia no longer forgets level maps and item descriptions, instead forgets skills (NetHack 3.7).
- Bugfix: flying character was marked as teetering on the edge of a pit (ToxicFrog).
- Bugfix: properly get message box width in curses (ToxicFrog).
- Bugfix: properly refresh message window after a --More-- (or >>) prompt in curses (ToxicFrog).
- Bugfix: fix several serious vulnerabilities (David Mendenhall).
